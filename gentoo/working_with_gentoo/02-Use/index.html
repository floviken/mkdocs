
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://floviken.github.io/mkdocs/gentoo/working_with_gentoo/02-Use/">
      
      
        <link rel="prev" href="../01-Portage/">
      
      
        <link rel="next" href="../03-Features/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.1, mkdocs-material-9.1.21">
    
    
      
        <title>What are USE flags - KaboliDocs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="What are USE flags - KaboliDocs" >
      
        <meta  property="og:description"  content="None" >
      
        <meta  property="og:image"  content="https://floviken.github.io/mkdocs/assets/images/social/gentoo/working_with_gentoo/02-Use.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://floviken.github.io/mkdocs/gentoo/working_with_gentoo/02-Use/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="What are USE flags - KaboliDocs" >
      
        <meta  name="twitter:description"  content="None" >
      
        <meta  name="twitter:image"  content="https://floviken.github.io/mkdocs/assets/images/social/gentoo/working_with_gentoo/02-Use.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="purple">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#what-are-use-flags" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="KaboliDocs" class="md-header__button md-logo" aria-label="KaboliDocs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            KaboliDocs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              What are USE flags
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="orange" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      Welcome to MkDocs
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../ssh/" class="md-tabs__link">
      SSH setup
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link md-tabs__link--active">
        Gentoo
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="KaboliDocs" class="md-nav__button md-logo" aria-label="KaboliDocs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    KaboliDocs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Welcome to MkDocs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../ssh/" class="md-nav__link">
        SSH setup
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Gentoo
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Gentoo
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        gentoo handbook
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/01-About%20the%20Gentoo%20Linux%20Installation/" class="md-nav__link">
        About the Gentoo Linux Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/010-Configuring%20the%20bootloader/" class="md-nav__link">
        Configuring the bootloader
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/02-Choosing%20the%20right%20installation%20medium/" class="md-nav__link">
        Choosing the right installation medium
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/03-Configuring%20the%20network/" class="md-nav__link">
        Configuring the network
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/04-Preparing%20the%20disks/" class="md-nav__link">
        Preparing the disks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/05-Installing%20the%20Gentoo%20installation%20files/" class="md-nav__link">
        Installing the Gentoo installation files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/06-Installing%20the%20Gentoo%20base%20system/" class="md-nav__link">
        Installing the Gentoo base system
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/07-Configuring%20the%20linux%20kernel/" class="md-nav__link">
        Configuring the Linux kernel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/08-Configuring%20the%20system/" class="md-nav__link">
        Configuring the system
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/09-Installing%20system%20tools/" class="md-nav__link">
        Installing system tools
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
          Working with gentoo
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Working with gentoo
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01-Portage/" class="md-nav__link">
        Working with Gentoo
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          What are USE flags
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        What are USE flags
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-idea-behind-use-flags" class="md-nav__link">
    The idea behind USE flags
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#definition-of-a-use-flag" class="md-nav__link">
    Definition of a USE flag
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-use-flags" class="md-nav__link">
    Using USE flags
  </a>
  
    <nav class="md-nav" aria-label="Using USE flags">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#declare-permanent-use-flags" class="md-nav__link">
    Declare permanent USE flags
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#declaring-use-flags-for-individual-packages" class="md-nav__link">
    Declaring USE flags for individual packages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#declaring-temporary-use-flags" class="md-nav__link">
    Declaring temporary USE flags
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#precedence" class="md-nav__link">
    Precedence
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adapting-the-entire-system-to-the-new-use-flags" class="md-nav__link">
    Adapting the entire system to the new USE flags
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-specific-use-flags" class="md-nav__link">
    Package specific USE flags
  </a>
  
    <nav class="md-nav" aria-label="Package specific USE flags">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#viewing-available-use-flags" class="md-nav__link">
    Viewing available USE flags
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#satisfying-required_use-conditions" class="md-nav__link">
    Satisfying REQUIRED_USE conditions
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../03-Features/" class="md-nav__link">
        Portage features
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../04-Initscripts/" class="md-nav__link">
        Runlevels
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../05-EnvVar/" class="md-nav__link">
        Environment variables
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
      
      
      
        <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
          Working with portage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Working with portage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../working_with_portage/01-Files/" class="md-nav__link">
        01 Files
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="what-are-use-flags">What are USE flags</h1>
<h2 id="the-idea-behind-use-flags">The idea behind USE flags</h2>
<p>When installing Gentoo, users make choices depending on the environment they are working with. A setup for a server differs from a setup for a workstation. A gaming workstation differs from a 3D rendering workstation.</p>
<p>This is not only true for choosing what packages to install, but also what features a certain package should support. If there is no need for OpenGL, why would someone bother to install and maintain OpenGL and build OpenGL support in most of the packages? If someone doesn't want to use KDE, why would they bother compiling packages with KDE support if those packages work flawlessly without?</p>
<p>To help users in deciding what to install/activate and what not, Gentoo wanted the user to specify his/her environment in an easy way. This forces the user into deciding what they really want and eases the process for Portage to make useful decisions.</p>
<h2 id="definition-of-a-use-flag">Definition of a USE flag</h2>
<p>Enter the USE flags. Such a flag is a keyword that embodies support and dependency-information for a certain concept. If a certain USE flag is set to enabled, then Portage will know the system administrator desires support for the chosen keyword. Of course this may alter the dependency information for a package. Depending on the USE flag, this may require pulling in <em>many</em> more dependencies in order to fulfill the requested dependency changes.</p>
<p>Take a look at a specific example: the <code>kde</code> USE flag. If this flag is not set in the <em>USE</em> variable (or if the value is prefixed with a minus sign: <code>-kde</code>), then all packages that have optional KDE support will be compiled <em>without</em> KDE support. All packages that have an optional KDE dependency will be installed <em>without</em> installing the KDE libraries (as dependency).</p>
<p>When the <code>kde</code> flag is set to enabled, then those packages will be compiled <em>with</em> KDE support, and the KDE libraries will be installed as dependency.</p>
<p>By correctly defining USE flags, the system will be tailored specifically to the needs of the system administrator.</p>
<h2 id="using-use-flags">Using USE flags</h2>
<h3 id="declare-permanent-use-flags">Declare permanent USE flags</h3>
<p>All USE flags are declared inside the <em>USE</em> variable. To make it easy for users to search and pick USE flags, we already provide a default USE setting. This setting is a collection of USE flags we think are commonly used by the Gentoo users. This default setting is declared in the make.defaults files that are part of the selected profile.</p>
<p>The profile the system listens to is pointed to by the /etc/portage/make.profile symlink. Each profile works on top of other profiles, and the end result is therefore the sum of all profiles. The top profile is the base profile (/var/db/repos/gentoo/profiles/base).</p>
<p>To view the currently active USE flags (completely), use <strong>emerge --info</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>root<span class="w"> </span><span class="c1"># emerge --info | grep ^USE</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nv">USE</span><span class="o">=</span><span class="s2">&quot;a52 aac acpi alsa branding cairo cdr dbus dts ...&quot;</span>
</code></pre></div>
<p>This variable already contains quite a lot of keywords. Do not alter any make.defaults file to tailor the <em>USE</em> variable to personal needs though: changes in these files will be undone when the Gentoo repository is updated!</p>
<p>To change this default setting, add or remove keywords to/from the USE variable. This is done globally by defining the <em>USE</em> variable in /etc/portage/make.conf. In this variable one can add the extra <em>USE</em> flags required, or remove the USE flags that are no longer needed. This latter is done by prefixing the keyword with the minus-sign (<code>-</code>).</p>
<p>For instance, to remove support for KDE and Qt but add support for LDAP, the following USE can be defined in /etc/portage/make.conf:</p>
<div class="highlight"><span class="filename">FILE /etc/portage/make.confUpdating USE in make.conf</span><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nv">USE</span><span class="o">=</span><span class="s2">&quot;-kde -qt5 ldap&quot;</span>
</code></pre></div>
<h3 id="declaring-use-flags-for-individual-packages">Declaring USE flags for individual packages</h3>
<p>Sometimes users want to declare a certain USE flag for one (or a couple) of applications but not system-wide. To accomplish this, edit /etc/portage/package.use. package.use is typically a single file, however it can also be a directory filled with children files; see the tip below and then <strong>man 5 portage</strong> for more information on how to use this convention. The following examples assume package.use is a single file.</p>
<p>For instance, to only have Blu-ray support for the VLC media player package:</p>
<div class="highlight"><span class="filename">FILE /etc/portage/package.useEnabling Blu-ray support for VLC</span><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>media-video/vlc<span class="w"> </span>bluray
</code></pre></div>
<p><div class="highlight"><span class="filename">Tip</span><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>If package.use is pre-existing as a directory (opposed to a single file), packages can have their USE flags modified by simply creating files under the package.use/ directory. Any file naming convention can work, however it is wise to implement a coherent naming scheme. One convention is to simply use the package name as the title for the child file. For example, setting the bluray USE flag for the media-video/vlc package can be performed as follows:
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>root<span class="w"> </span><span class="c1">#echo &quot;media-video/vlc bluray&quot; &gt;&gt; /etc/portage/package.use/vlc</span>
</code></pre></div></p>
<p>Similarly it is possible to explicitly disable USE flags for a certain application. For instance, to disable bzip2 support in PHP (but have it for all other packages through the USE flag declaration in make.conf):</p>
<div class="highlight"><span class="filename">FILE /etc/portage/package.use</span><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>Disable<span class="w"> </span>bzip2<span class="w"> </span>support<span class="w"> </span><span class="k">for</span><span class="w"> </span>PHP
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>dev-lang/php<span class="w"> </span>-bzip2
</code></pre></div>
<h3 id="declaring-temporary-use-flags">Declaring temporary USE flags</h3>
<p>Sometimes users need to set a USE flag for a brief moment. Instead of editing /etc/portage/make.conf twice (to do and undo the <em>USE</em> changes) just declare the USE variable as an environment variable. Remember that this setting only applies for the command entered; re-emerging or updating this application (either explicitly or as part of a system update) will undo the changes that were triggered through the (temporary) USE flag definition.</p>
<p>The following example temporarily removes the <code>pulseaudio</code> value from the USE variable during the installation of SeaMonkey:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>root<span class="w"> </span><span class="c1"># USE=&quot;-pulseaudio&quot; emerge www-client/seamonkey</span>
</code></pre></div>
<h3 id="precedence">Precedence</h3>
<p>Of course there is a certain precedence on what setting has priority over the USE setting. The precedence for the USE setting is, ordered by priority (first has lowest priority):</p>
<ol>
<li>Default USE setting declared in the make.defaults files part of your profile</li>
<li>User-defined USE setting in /etc/portage/make.conf</li>
<li>User-defined USE setting in /etc/portage/package.use</li>
<li>User-defined USE setting as environment variable</li>
</ol>
<p>To view the final USE setting as seen by Portage, run <strong>emerge --info</strong>. This will list all relevant variables (including the USE variable) with their current definition as known to Portage.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>root<span class="w"> </span><span class="c1"># emerge --info</span>
</code></pre></div>
<h3 id="adapting-the-entire-system-to-the-new-use-flags">Adapting the entire system to the new USE flags</h3>
<p>After having altered USE flags, the system should be updated to reflect the necessary changes. To do so, use the <code>--newuse</code> option with <strong>emerge</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>root<span class="w"> </span><span class="c1"># emerge --update --deep --newuse @world</span>
</code></pre></div>
<p>Next, run Portage's depclean to remove the conditional dependencies that were emerged on the "old" system but that have been obsoleted by the new USE flags.</p>
<p>!!! info title="Important"</p>
<div class="highlight"><pre><span></span><code>Double-check the provided list of &quot;obsoleted&quot; packages to make sure it does not remove packages that are needed. In the following example the --pretend (-p) switch to have depclean only list the packages without removing them:
root # emerge --pretend --depclean
</code></pre></div>
<p>When depclean has finished, <strong>emerge</strong> may prompt to rebuild the applications that are dynamically linked against shared objects provided by possibly removed packages. Portage will preserve necessary libraries until this action is done to prevent breaking applications. It stores what needs to be rebuilt in the preserved-rebuild set. To rebuild the necessary packages, run:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>root<span class="w"> </span><span class="c1"># emerge @preserved-rebuild</span>
</code></pre></div>
<p>When all this is accomplished, the system is using the new USE flag settings.</p>
<h2 id="package-specific-use-flags">Package specific USE flags</h2>
<h3 id="viewing-available-use-flags">Viewing available USE flags</h3>
<p>Let's take the example of seamonkey: what USE flags does it listen to? To find out, we use <strong>emerge</strong> with the <code>--pretend</code> and <code>--verbose</code> options:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>root<span class="w"> </span><span class="c1"># emerge --pretend --verbose www-client/seamonkey</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>These<span class="w"> </span>are<span class="w"> </span>the<span class="w"> </span>packages<span class="w"> </span>that<span class="w"> </span>would<span class="w"> </span>be<span class="w"> </span>merged,<span class="w"> </span><span class="k">in</span><span class="w"> </span>order:
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>Calculating<span class="w"> </span>dependencies...<span class="w"> </span><span class="k">done</span>!
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="o">[</span>ebuild<span class="w">  </span>N<span class="w">     </span><span class="o">]</span><span class="w"> </span>www-client/seamonkey-2.48_beta1::gentoo<span class="w">  </span><span class="nv">USE</span><span class="o">=</span><span class="s2">&quot;calendar chatzilla crypt dbus gmp-autoupdate ipc jemalloc pulseaudio roaming skia startup-notification -custom-cflags -custom-optimization -debug -gtk3 -jack -minimal (-neon) (-selinux) (-system-cairo) -system-harfbuzz -system-icu -system-jpeg -system-libevent -system-libvpx -system-sqlite {-test} -wifi&quot;</span><span class="w"> </span><span class="nv">L10N</span><span class="o">=</span><span class="s2">&quot;-ca -cs -de -en-GB -es-AR -es-ES -fi -fr -gl -hu -it -ja -lt -nb -nl -pl -pt-PT -ru -sk -sv -tr -uk -zh-CN -zh-TW&quot;</span><span class="w"> </span><span class="m">216</span>,860<span class="w"> </span>KiB
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>Total:<span class="w"> </span><span class="m">1</span><span class="w"> </span>package<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="w"> </span>new<span class="o">)</span>,<span class="w"> </span>Size<span class="w"> </span>of<span class="w"> </span>downloads:<span class="w"> </span><span class="m">216</span>,860<span class="w"> </span>KiB
</code></pre></div>
<p><strong>emerge</strong> isn't the only tool for this job. In fact, there is a tool dedicated to package information called <strong>equery</strong> which resides in the <a href="https://packages.gentoo.org/packages/app-portage/gentoolkit">app-portage/gentoolkit</a> package</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>root<span class="w"> </span><span class="c1"># emerge --ask app-portage/gentoolkit</span>
</code></pre></div>
<p>Now run <strong>equery</strong> with the uses argument to view the USE flags of a certain package. For instance, for the <a href="https://packages.gentoo.org/packages/app-portage/portage-utils">app-portage/portage-utils</a> package:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>user<span class="w"> </span>$<span class="w"> </span>equery<span class="w"> </span>--nocolor<span class="w"> </span><span class="nv">uses</span><span class="w"> </span><span class="o">=</span>app-portage/portage-utils-0.93.3
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="o">[</span><span class="w"> </span>Legend<span class="w"> </span>:<span class="w"> </span>U<span class="w"> </span>-<span class="w"> </span>final<span class="w"> </span>flag<span class="w"> </span>setting<span class="w"> </span><span class="k">for</span><span class="w"> </span>installation<span class="o">]</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="o">[</span><span class="w">        </span>:<span class="w"> </span>I<span class="w"> </span>-<span class="w"> </span>package<span class="w"> </span>is<span class="w"> </span>installed<span class="w"> </span>with<span class="w"> </span>flag<span class="w">     </span><span class="o">]</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="o">[</span><span class="w"> </span>Colors<span class="w"> </span>:<span class="w"> </span>set,<span class="w"> </span><span class="nb">unset</span><span class="w">                             </span><span class="o">]</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w"> </span>*<span class="w"> </span>Found<span class="w"> </span>these<span class="w"> </span>USE<span class="w"> </span>flags<span class="w"> </span><span class="k">for</span><span class="w"> </span>app-portage/portage-utils-0.93.3:
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w"> </span>U<span class="w"> </span>I
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w"> </span>+<span class="w"> </span>+<span class="w"> </span>nls<span class="w">       </span>:<span class="w"> </span>Add<span class="w"> </span>Native<span class="w"> </span>Language<span class="w"> </span>Support<span class="w"> </span><span class="o">(</span>using<span class="w"> </span>gettext<span class="w"> </span>-<span class="w"> </span>GNU<span class="w"> </span>locale<span class="w"> </span>utilities<span class="o">)</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w"> </span>+<span class="w"> </span>+<span class="w"> </span>openmp<span class="w">    </span>:<span class="w"> </span>Build<span class="w"> </span>support<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>OpenMP<span class="w"> </span><span class="o">(</span>support<span class="w"> </span>parallel<span class="w"> </span>computing<span class="o">)</span>,<span class="w"> </span>requires<span class="w"> </span>&gt;<span class="o">=</span>sys-devel/gcc-4.2<span class="w"> </span>built<span class="w"> </span>with<span class="w"> </span><span class="nv">USE</span><span class="o">=</span><span class="s2">&quot;openmp&quot;</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w"> </span>+<span class="w"> </span>+<span class="w"> </span>qmanifest<span class="w"> </span>:<span class="w"> </span>Build<span class="w"> </span>qmanifest<span class="w"> </span>applet,<span class="w"> </span>this<span class="w"> </span>adds<span class="w"> </span>additional<span class="w"> </span>dependencies<span class="w"> </span><span class="k">for</span><span class="w"> </span>GPG,<span class="w"> </span>OpenSSL<span class="w"> </span>and<span class="w"> </span>BLAKE2B<span class="w"> </span>hashing
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="w"> </span>+<span class="w"> </span>+<span class="w"> </span>qtegrity<span class="w">  </span>:<span class="w"> </span>Build<span class="w"> </span>qtegrity<span class="w"> </span>applet,<span class="w"> </span>this<span class="w"> </span>adds<span class="w"> </span>additional<span class="w"> </span>dependencies<span class="w"> </span><span class="k">for</span><span class="w"> </span>OpenSSL
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span>static<span class="w">    </span>:<span class="w"> </span>!!do<span class="w"> </span>not<span class="w"> </span><span class="nb">set</span><span class="w"> </span>this<span class="w"> </span>during<span class="w"> </span>bootstrap!!<span class="w"> </span>Causes<span class="w"> </span>binaries<span class="w"> </span>to<span class="w"> </span>be<span class="w"> </span>statically<span class="w"> </span>linked<span class="w"> </span>instead<span class="w"> </span>of<span class="w"> </span>dynamically
</code></pre></div>
<h2 id="satisfying-required_use-conditions">Satisfying REQUIRED_USE conditions</h2>
<p>Some ebuilds require or forbid certain combinations of USE flags in order to work properly. This is expressed via a set of conditions placed in a <em>REQUIRED_USE</em> expression. This conditions ensure that all features and dependencies are complete and that the build will succeed and perform as expected. If any of these are not met, emerge will alert you and ask you to fix the issue.</p>
<table>
<thead>
<tr>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>REQUIRED_USE=<code>"foo? ( bar )"</code></td>
<td>If foo is set, bar must be set.</td>
</tr>
<tr>
<td>REQUIRED_USE=<code>"foo? ( !bar )"</code></td>
<td>If foo is set, bar must not be set.</td>
</tr>
<tr>
<td>REQUIRED_USE=<code>"foo? ( || ( bar baz ) )"</code></td>
<td>If foo is set, bar or baz must be set.</td>
</tr>
<tr>
<td>REQUIRED_USE=<code>"^^ ( foo bar baz )"</code></td>
<td>Exactly one of foo bar or baz must be set.</td>
</tr>
<tr>
<td>REQUIRED_USE=<code>"|| ( foo bar baz )"</code></td>
<td>At least one of foo bar or baz must be set.</td>
</tr>
<tr>
<td>REQUIRED_USE=<code>"?? ( foo bar baz )"</code></td>
<td>No more than one of foo bar or baz may be set.</td>
</tr>
<tr>
<td>--</td>
<td>--</td>
</tr>
</tbody>
</table>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2023 <a href="https://github.com/floviken"  target="_blank" rel="noopener">kaboli</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/floviken" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tracking", "navigation.sections", "navigation.sections", "navigation.expand", "navigation.top", "toc.integrate", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>