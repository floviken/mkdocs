
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://floviken.github.io/mkdocs/gentoo/working_with_gentoo/03-Features/">
      
      
        <link rel="prev" href="../02-Use/">
      
      
        <link rel="next" href="../04-Initscripts/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.1, mkdocs-material-9.1.21">
    
    
      
        <title>Portage features - KaboliDocs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Portage features - KaboliDocs" >
      
        <meta  property="og:description"  content="None" >
      
        <meta  property="og:image"  content="https://floviken.github.io/mkdocs/assets/images/social/gentoo/working_with_gentoo/03-Features.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://floviken.github.io/mkdocs/gentoo/working_with_gentoo/03-Features/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Portage features - KaboliDocs" >
      
        <meta  name="twitter:description"  content="None" >
      
        <meta  name="twitter:image"  content="https://floviken.github.io/mkdocs/assets/images/social/gentoo/working_with_gentoo/03-Features.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="purple">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#portage-features" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="KaboliDocs" class="md-header__button md-logo" aria-label="KaboliDocs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            KaboliDocs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Portage features
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="orange" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      Welcome to MkDocs
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../ssh/" class="md-tabs__link">
      SSH setup
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link md-tabs__link--active">
        Gentoo
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="KaboliDocs" class="md-nav__button md-logo" aria-label="KaboliDocs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    KaboliDocs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Welcome to MkDocs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../ssh/" class="md-nav__link">
        SSH setup
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Gentoo
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Gentoo
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        gentoo handbook
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/01-About%20the%20Gentoo%20Linux%20Installation/" class="md-nav__link">
        About the Gentoo Linux Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/010-Configuring%20the%20bootloader/" class="md-nav__link">
        Configuring the bootloader
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/02-Choosing%20the%20right%20installation%20medium/" class="md-nav__link">
        Choosing the right installation medium
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/03-Configuring%20the%20network/" class="md-nav__link">
        Configuring the network
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/04-Preparing%20the%20disks/" class="md-nav__link">
        Preparing the disks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/05-Installing%20the%20Gentoo%20installation%20files/" class="md-nav__link">
        Installing the Gentoo installation files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/06-Installing%20the%20Gentoo%20base%20system/" class="md-nav__link">
        Installing the Gentoo base system
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/07-Configuring%20the%20linux%20kernel/" class="md-nav__link">
        Configuring the Linux kernel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/08-Configuring%20the%20system/" class="md-nav__link">
        Configuring the system
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/09-Installing%20system%20tools/" class="md-nav__link">
        Installing system tools
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
          Working with gentoo
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Working with gentoo
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01-Portage/" class="md-nav__link">
        Working with Gentoo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../02-Use/" class="md-nav__link">
        What are USE flags
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Portage features
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Portage features
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#portage-features_1" class="md-nav__link">
    Portage features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#distributed-compiling" class="md-nav__link">
    Distributed compiling
  </a>
  
    <nav class="md-nav" aria-label="Distributed compiling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-distcc" class="md-nav__link">
    Using distcc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-distcc" class="md-nav__link">
    Installing distcc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#activating-portage-distcc-support" class="md-nav__link">
    Activating Portage distcc support
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caching-compilation-objects" class="md-nav__link">
    Caching compilation objects
  </a>
  
    <nav class="md-nav" aria-label="Caching compilation objects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#about-ccache" class="md-nav__link">
    About ccache
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-ccache" class="md-nav__link">
    Installing ccache
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#activating-portage-ccache-support" class="md-nav__link">
    Activating Portage ccache support
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-ccache-outside-portage" class="md-nav__link">
    Using ccache outside Portage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#binary-package-support" class="md-nav__link">
    Binary package support
  </a>
  
    <nav class="md-nav" aria-label="Binary package support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-prebuilt-packages" class="md-nav__link">
    Creating prebuilt packages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-prebuilt-packages" class="md-nav__link">
    Installing prebuilt packages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#distributing-prebuilt-packages-to-others" class="md-nav__link">
    Distributing prebuilt packages to others
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fetching-files" class="md-nav__link">
    Fetching files
  </a>
  
    <nav class="md-nav" aria-label="Fetching files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#userfetch" class="md-nav__link">
    Userfetch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-distfiles" class="md-nav__link">
    Verify distfiles
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../04-Initscripts/" class="md-nav__link">
        Runlevels
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../05-EnvVar/" class="md-nav__link">
        Environment variables
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
      
      
      
        <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
          Working with portage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Working with portage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../working_with_portage/01-Files/" class="md-nav__link">
        01 Files
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="portage-features">Portage features</h1>
<h2 id="portage-features_1">Portage features</h2>
<p>Portage has several additional features that make the Gentoo experience even better. Many of these features rely on certain software tools that improve performance, reliability, security, ...</p>
<p>To enable or disable certain Portage features, edit /etc/portage/make.conf and update or set the <em>FEATURES</em> variable which contains the various feature keywords, separated by white space. In several cases it will also be necessary to install the additional tool on which the feature relies.</p>
<p>Not all features that Portage supports are listed here. For a full overview, please consult the make.conf man page:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>user<span class="w"> </span>$<span class="w"> </span>man<span class="w"> </span>make.conf
</code></pre></div>
<p>To find out what <em>FEATURES</em> are set by default, run <strong>emerge --info</strong> and search for the <em>FEATURES</em> variable or <em>grep</em> it out:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>user<span class="w"> </span>$<span class="w"> </span>emerge<span class="w"> </span>--info<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>^FEATURES<span class="o">=</span>
</code></pre></div>
<h2 id="distributed-compiling">Distributed compiling</h2>
<h3 id="using-distcc">Using distcc</h3>
<p><strong>distcc</strong> is a program to distribute compilations across several, not necessarily identical, machines on a network. The distcc client sends all necessary information to the available distcc servers (running distccd) so they can compile pieces of source code for the client. The net result is a faster compilation time.</p>
<p>More information about distcc (and how to have it work with Gentoo) can be found in the <a href="https://wiki.gentoo.org/wiki/Distcc">Distcc</a> article.</p>
<h3 id="installing-distcc">Installing distcc</h3>
<p>Distcc ships with a graphical monitor to monitor tasks that the computer is sending away for compilation. This tool is automatically installed if <code>USE="gtk"</code> is set.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>root<span class="w"> </span><span class="c1"># emerge --ask sys-devel/distcc</span>
</code></pre></div>
<h3 id="activating-portage-distcc-support">Activating Portage distcc support</h3>
<p>Add distcc to the <em>FEATURES</em> variable inside /etc/portage/make.conf. Next, edit the <em>MAKEOPTS</em> variable and increase the number of parallel build jobs that the system allows. A known guideline is to fill in <code>-jN</code> where <code>N</code> is the number of CPUs that run distccd (including the current host) plus one, but that is just a guideline.</p>
<p>Now run <strong>distcc-config</strong> and enter the list of available distcc servers. For a simple example assume that the available DistCC servers are 192.168.1.102 (the current host), 192.168.1.103 and 192.168.1.104 (two "remote" hosts):</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>root<span class="w"> </span><span class="c1"># distcc-config --set-hosts &quot;192.168.1.102 192.168.1.103 192.168.1.104&quot;</span>
</code></pre></div>
Don't forget to run the distccd daemon as well:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>root<span class="w"> </span><span class="c1"># rc-update add distccd default</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>root<span class="w"> </span><span class="c1"># /etc/init.d/distccd start</span>
</code></pre></div>
<h2 id="caching-compilation-objects">Caching compilation objects</h2>
<h3 id="about-ccache">About ccache</h3>
<p><strong>ccache</strong> is a fast compiler cache. Whenever an application is compiled, it will cache intermediate results so that, whenever the same program and version is recompiled, the compilation time is greatly reduced. The first time ccache is run, it will be much slower than a normal compilation. Subsequent recompiles however should be faster. ccache is only helpful if the same application version will be recompiled many times; thus it is mostly only useful for software developers.</p>
<p>For more information about ccache, please visit its <a href="https://ccache.dev/">homepage</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
</div>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>ccache<span class="w"> </span>is<span class="w"> </span>known<span class="w"> </span>to<span class="w"> </span>cause<span class="w"> </span>numerous<span class="w"> </span>compilation<span class="w"> </span>failures.<span class="w"> </span>Sometimes<span class="w"> </span>ccache<span class="w"> </span>will<span class="w"> </span>retain<span class="w"> </span>stale<span class="w"> </span>code<span class="w"> </span>objects<span class="w"> </span>or<span class="w"> </span>corrupted<span class="w"> </span>files,<span class="w"> </span>which<span class="w"> </span>can<span class="w"> </span>lead<span class="w"> </span>to<span class="w"> </span>packages<span class="w"> </span>that<span class="w"> </span>cannot<span class="w"> </span>be<span class="w"> </span>emerged.<span class="w"> </span>If<span class="w"> </span>this<span class="w"> </span>happens<span class="w"> </span><span class="o">(</span>errors<span class="w"> </span>like<span class="w"> </span><span class="s2">&quot;File not recognized: File truncated&quot;</span><span class="w"> </span>come<span class="w"> </span>up<span class="w"> </span><span class="k">in</span><span class="w"> </span>build<span class="w"> </span>logs<span class="o">)</span>,<span class="w"> </span>try<span class="w"> </span>recompiling<span class="w"> </span>the<span class="w"> </span>application<span class="w"> </span>with<span class="w"> </span>ccache<span class="w"> </span>disabled<span class="w"> </span><span class="o">(</span><span class="nv">FEATURES</span><span class="o">=</span><span class="s2">&quot;-ccache&quot;</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>/etc/portage/make.conf<span class="w"> </span>or<span class="w"> </span>one-shot<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>commandline<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>following<span class="o">)</span><span class="w"> </span>before<span class="w"> </span>reporting<span class="w"> </span>a<span class="w"> </span>bug:
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>root<span class="w"> </span><span class="c1"># FEATURES=&quot;-ccache&quot; emerge --oneshot &lt;category/package&gt;</span>
</code></pre></div></p>
<h3 id="installing-ccache">Installing ccache</h3>
<p>To install ccache run the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>root<span class="w"> </span><span class="c1"># emerge --ask dev-util/ccache</span>
</code></pre></div>
<h3 id="activating-portage-ccache-support">Activating Portage ccache support</h3>
<p>Open /etc/portage/make.conf and add <code>ccache</code> to any values defined in the <em>FEATURES</em> variable. If <em>FEATURES</em> does not exist, then create it. Next, add a new variable called <em>CCACHE_SIZE</em> and set it to <code>2G</code>:</p>
<div class="highlight"><span class="filename">FILE /etc/portage/make.confEnabling Portage ccache support</span><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nv">FEATURES</span><span class="o">=</span><span class="s2">&quot;ccache&quot;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nv">CCACHE_SIZE</span><span class="o">=</span><span class="s2">&quot;2G&quot;</span>
</code></pre></div>
<p>To check if ccache functions, ask ccache to provide its statistics. Because Portage uses a different ccache home directory, it is necessary to temporarily set the <em>CCACHE_DIR</em> variable:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>root<span class="w"> </span><span class="c1"># CCACHE_DIR=&quot;/var/tmp/ccache&quot; ccache -s</span>
</code></pre></div>
<p>The /var/tmp/ccache/ location is Portage' default ccache home directory; it can be changed by setting the <em>CCACHE_DIR</em> variable in /etc/portage/make.conf.</p>
<p>When running <strong>ccache</strong> standalone, it would use the default location of ${HOME}/.ccache/, which is why the <em>CCACHE_DIR</em> variable needs to be set when asking for the (Portage) ccache statistics.</p>
<h3 id="using-ccache-outside-portage">Using ccache outside Portage</h3>
<p>To use ccache for non-Portage compilations, add /usr/lib/ccache/bin/ to the beginning of the <em>PATH</em> variable (before /usr/bin). This can be accomplished by editing ~/.bash_profile in the user's home directory. Using ~/.bash_profile is one way to define <em>PATH</em> variables.</p>
<div class="highlight"><span class="filename">FILE ~/.bash_profileSetting the ccache location before any other PATH</span><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;/usr/lib/ccache/bin:</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
<h2 id="binary-package-support">Binary package support</h2>
<h3 id="creating-prebuilt-packages">Creating prebuilt packages</h3>
<p>Portage supports the installation of prebuilt packages. Even though Gentoo does not provide prebuilt packages by itself Portage can be made fully aware of prebuilt packages.</p>
<p>To create a prebuilt package use the <strong>quickpkg</strong> command if the package is already installed on the system, or emerge with the <code>--buildpkg</code> or <code>--buildpkgonly</code> options.</p>
<p>To have Portage create prebuilt packages of every single package that gets installed, add buildpkg to the <em>FEATURES</em> variable.</p>
<p>More extended support for creating prebuilt package sets can be obtained with catalyst. For more information on catalyst please read the <a href="https://wiki.gentoo.org/wiki/Project:Catalyst/FAQ">Catalyst FAQ</a>.</p>
<h3 id="installing-prebuilt-packages">Installing prebuilt packages</h3>
<p>Although Gentoo doesn't provide one, it is possible to create a central repository where prebuilt packages are stored. In order to use this repository, it is necessary to make Portage aware of it by having the <em>PORTAGE_BINHOST</em> variable point to it. For instance, if the prebuilt packages are on ftp://buildhost/gentoo:</p>
<div class="highlight"><span class="filename">FILE /etc/portage/make.conf Add PORTAGE_BINHOST location</span><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nv">PORTAGE_BINHOST</span><span class="o">=</span><span class="s2">&quot;ftp://buildhost/gentoo&quot;</span>
</code></pre></div>
<p>To install a prebuilt package, add the <code>--getbinpkg</code> option to the emerge command alongside of the <code>--usepkg</code> option. The former tells emerge to download the prebuilt package from the previously defined server while the latter asks emerge to try to install the prebuilt package first before fetching the sources and compiling it.</p>
<p>For instance, to install gnumeric with prebuilt packages:</p>
<p><code>root # emerge --usepkg --getbinpkg gnumeric</code></p>
<p>More information about emerge's prebuilt package options can be found in the emerge man page:</p>
<p><code>user $ man emerge</code></p>
<h3 id="distributing-prebuilt-packages-to-others">Distributing prebuilt packages to others</h3>
<p>If prebuilt packages are to be distributed to others, then make sure that this is permitted. Check the distribution terms of the upstream package for this. For example, for a package released under the GNU GPL, sources must be made available along with the binaries.</p>
<p>Ebuilds may define a <code>bindist</code> restriction in their <em>RESTRICT</em> variable if built binaries are not distributable. Sometimes this restriction is conditional on one or more USE flags.</p>
<p>By default, Portage will not mask any packages because of restrictions. This can be changed globally by setting the <em>ACCEPT_RESTRICT</em> variable in /etc/portage/make.conf. For example, to mask packages that have a <code>bindist</code> restriction, add the following line to make.conf:</p>
<div class="highlight"><span class="filename">FILE /etc/portage/make.confOnly accept binary distributable packages</span><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nv">ACCEPT_RESTRICT</span><span class="o">=</span><span class="s2">&quot;* -bindist&quot;</span>
</code></pre></div>
<p>It is also possible to override the <em>ACCEPT_RESTRICT</em> variable by passing the <code>--accept-restrict</code> option to the <strong>emerge</strong> command. For example, <code>--accept-restrict=-bindist</code> will temporarily mask packages with a <code>bindist</code> restriction.</p>
<p>Also consider setting the <em>ACCEPT_LICENSE</em> variable when distributing packages. See the Licenses section for this.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
</div>
<p>It is entirely the responsibility of each user to comply with packages' license terms and with laws of each user's country. The metadata variables defined by ebuilds (<em>RESTRICT</em> or <em>LICENSE</em>) can provide guidance when distribution of binaries is not permitted, however output from Portage or questions answered by the Gentoo developers are not legal statements and should not be relied upon as such. Be cautious to abide by the law of your physical location.</p>
<h2 id="fetching-files">Fetching files</h2>
<h3 id="userfetch">Userfetch</h3>
<p>Portage is normally run as the root user. Setting <code>FEATURES="userfetch"</code> will allow Portage to drop root privileges while fetching package sources and run with user/group permissions of portage:portage. This is a small security improvement.</p>
<p>If <code>userfetch</code> is set in <em>FEATURES</em> be sure to change the owner of all the files beneath /var/db/repos/gentoo using the <strong>chown</strong> command with root privileges:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>root<span class="w"> </span><span class="c1"># chown --recursive --verbose portage:portage /var/db/repos/gentoo</span>
</code></pre></div>
<h3 id="verify-distfiles">Verify distfiles</h3>
<p>To re-verify the integrity and (potentially) re-download previously removed/corrupted distfiles for all currently installed packages, run:
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>root<span class="w"> </span><span class="c1"># emerge --ask --fetchonly --emptytree @world</span>
</code></pre></div></p>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2023 <a href="https://github.com/floviken"  target="_blank" rel="noopener">kaboli</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/floviken" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tracking", "navigation.sections", "navigation.sections", "navigation.expand", "navigation.top", "toc.integrate", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>